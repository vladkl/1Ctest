<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"></meta><link rel="stylesheet" type="text/css" href="__STYLE__"></link><meta name="GENERATOR" content="MSHTML 11.00.9600.18792"></meta></head><body>
<h1>Показатели операционной системы</h1>
<ul><li><a href="#counters">Показатели</a> 
</li><li><a href="#pdh">Подсистема мониторинга Windows (PDH)</a> 
</li><li><a href="#agent">Агент ЦКК</a></li></ul><h2 id="counters">Показатели</h2>
<p>В процессе мониторинга имеется возможность сбора показателей производительности операционной системы. Значения таких показателей могут использоваться для выявления проблем конфигурации, влияющих на загруженность серверного оборудования. </p>
<p>В ЦУП доступно два источника сбора информации о счетчиках производительности: <a href="#pdh">Подсистема мониторинга Windows (PDH)</a> и <a href="#agent">Агент ЦКК</a>.</p>
<h2 id="pdh">Сбор счетчиков средствами мониторинга Windows</h2>
<p>Пользователь, от имени которого запускаются рабочие процессы <strong>сервера ИБ ЦУП</strong>, должен входить в группу "Performance Monitor Users" на контролируемом сервере.<br><br>Для настройки прав доступа запустите команду "Выполнить" (Win+R) и введите lusrmgr.msc:<br><br><img src="_files/Prformance Monitor Users.png"></img></p>
<p><strong>ВНИМАНИЕ: После добавления пользователя в группу, может потребоваться выход и повторный вход в систему или перезагрузка для того, чтобы изменения вступили в силу.</strong></p>
<p>Убедитесь (по-умолчанию так и есть), что на контролируемом сервере: </p>
<ul><li>запущена служба "Удаленный реестр (Remote Registry)"; 
</li><li>для пользователя, от имени которого запущен клиент ЦУП, есть право чтения раздела реестра "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Perflib"; 
</li><li>в параметрах групповой политики (gpedit.msc) присутствует строка <br>"Software\Microsoft\Windows NT\CurrentVersion\Perflib" в параметре <br>"Политика Локальный компьютер \ Конфигурация Windows \ Параметры безопасности \ Локальные политики \ Параметры безопасности \ Сетевой доступ: удаленно доступные пути и вложенные пути реестра".</li></ul><h2 id="agent">Сбор счетчиков с помощью Агента ЦКК</h2>
<p>Агент ЦКК - это java-приложение, которое запускается на контролируемом сервере, и позволяет решать задачи удаленного мониторинга и сбора информации о системе. В рамках ЦУП Агент используется только для сбора счетчиков производительности.</p>
<p>Для настройки сбора счетчиков необходимо:</p>
<ul><li>Опубликовать в информационной базе ЦУП http-сервис AgentQMC 
</li><li>Создать в информационной базе ЦУП пользователя, от имени которого Агент ЦКК будет устанавливать подключение к опубликованному http-сервису. Созданному пользователю необходимо назначить роль АгентЦКК. 
</li><li>Установить Агент ЦКК на контролируемом сервере. <br>В процессе установки следует указать: 
<ul><li>адрес опубликованного http-сервиса, например: <a href="http://server/PMC/hs/AgentQMC">http://server/PMC/hs/AgentQMC</a> 
</li><li>имя и пароль созданного пользователя</li></ul></li></ul><p>Если все настройки указаны правильно, то после установки и запуска службы Агент ЦКК зарегистрируется в справочнике ЦУП <a href="Catalog.АгентыЦКК/Help">Агенты ЦКК</a>.<br>Зарегистрированные Агенты становятся доступны для выбора в мастере настройки и могут быть использованы для сбора счетчиков, при этом версия Агента должна быть 1.0.9.1 или выше.</p></body></html>