<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"><html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:v="urn:schemas-microsoft-com:vml"><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type"></meta><link rel="stylesheet" type="text/css" href="v8help://service_book/service_style"></link><meta name="GENERATOR" content="MSHTML 8.00.6001.18854"></meta></head><body>
<h2 style="MARGIN: 12pt 0cm 3pt"><a name="_Toc210828365"></a><a name="_Toc210828297"><span style="mso-bookmark: _Toc210828365"><em><font size="5" face="Arial">Создание и редактирование сценариев</font></em></span></a></h2>
<p style="MARGIN: 0cm 0cm 0pt" class="MsoNormal"><font size="2" face="Tahoma">ЦУП включает инструменты для создания и редактирования сценариев работы ЦУП. Сценарий работы описывает поведение ЦУП в зависимости от его состояния и произошедших в системе событий.</font></p>
<p style="MARGIN: 0cm 0cm 0pt" class="MsoNormal"><o:p><font size="2" face="Tahoma"> </font></o:p></p>
<p style="MARGIN: 0cm 0cm 0pt" class="MsoNormal"><font size="2" face="Tahoma">Редактор сценариев вызывается из меню «ЦУП \ Сценарии».</font></p>
<p style="MARGIN: 0cm 0cm 0pt" class="MsoNormal"><o:p><font size="2" face="Tahoma"> </font></o:p></p>
<p style="MARGIN: 0cm 0cm 0pt" class="MsoNormal"><font size="2" face="Tahoma">Структура сценария содержит следующие уровни:</font></p>
<ul><li>
<div style="MARGIN: 0cm 0cm 0pt"><font size="2" face="Tahoma">Состояние</font></div>
<ul><li>
<div style="MARGIN: 0cm 0cm 0pt"><font size="2" face="Tahoma">Событие</font></div>
<ul><li>
<div style="MARGIN: 0cm 0cm 0pt"><font size="2" face="Tahoma">Команда</font></div></li></ul></li></ul></li></ul><p style="MARGIN: 0cm 0cm 0pt 36pt; mso-list: none; tab-stops: 35.4pt" class="Bullet3"><o:p><font size="2" face="Tahoma"> </font></o:p></p>
<p style="TEXT-INDENT: 0cm; MARGIN: 0cm 0cm 0pt; mso-list: none; tab-stops: 35.4pt" class="Bullet3"><v:shapetype id="_x0000_t75" stroked="f" filled="f" path="m@4@5l@4@11@9@11@9@5xe" o:preferrelative="t" o:spt="75" coordsize="21600,21600"><v:stroke joinstyle="miter"></v:stroke><v:formulas><v:f eqn="if lineDrawn pixelLineWidth 0"></v:f><v:f eqn="sum @0 1 0"></v:f><v:f eqn="sum 0 0 @1"></v:f><v:f eqn="prod @2 1 2"></v:f><v:f eqn="prod @3 21600 pixelWidth"></v:f><v:f eqn="prod @3 21600 pixelHeight"></v:f><v:f eqn="sum @0 0 1"></v:f><v:f eqn="prod @6 1 2"></v:f><v:f eqn="prod @7 21600 pixelWidth"></v:f><v:f eqn="sum @8 21600 0"></v:f><v:f eqn="prod @7 21600 pixelHeight"></v:f><v:f eqn="sum @10 21600 0"></v:f></v:formulas><v:path o:connecttype="rect" gradientshapeok="t" o:extrusionok="f"></v:path><o:lock aspectratio="t" v:ext="edit"></o:lock></v:shapetype></p>
<p style="TEXT-INDENT: 0cm; MARGIN: 0cm 0cm 0pt; mso-list: none; tab-stops: 35.4pt" class="Bullet3"><o:p><font size="2" face="Tahoma"></font></o:p><img src="_files/027 - ЦУП (редактор сценариев).png"></img> </p>
<h3 style="MARGIN: 12pt 0cm 3pt"><a name="_Toc210828366"></a><a name="_Toc210828298"><span style="mso-bookmark: _Toc210828366"><font size="4" face="Arial">Состояние</font></span></a></h3>
<p style="TEXT-INDENT: 0cm; MARGIN: 0cm 0cm 0pt; mso-list: none; tab-stops: 35.4pt" class="Bullet3"><font size="2" face="Tahoma">Состояние – это определенный набор реакций на события. Находясь в одном состоянии ЦУП будет единственным образом реагировать на одно и то же событие. В другом состоянии реакция может быть другой.</font></p>
<h3 style="MARGIN: 12pt 0cm 3pt"><a name="_Toc210828367"></a><a name="_Toc210828299"><span style="mso-bookmark: _Toc210828367"><font size="4" face="Arial">Событие</font></span></a></h3>
<p style="TEXT-INDENT: 0cm; MARGIN: 0cm 0cm 0pt; mso-list: none; tab-stops: 35.4pt" class="Bullet3"><font size="2" face="Tahoma">ЦУП позволяет отслеживать следующие предопределенные типы событий:</font></p>
<ul><li>
<div style="TEXT-INDENT: 0cm; MARGIN: 0cm 0cm 0pt; mso-list: none; tab-stops: 35.4pt"><font size="2" face="Tahoma">«Начало работы». Сценарий только что запущен на выполнение. В обработке этого события можно установить начальное состояние для сценария. Например, добавить все необходимые показатели производительности, установить частоту мониторинга и т.п.</font></div>
</li><li>
<div style="TEXT-INDENT: 0cm; MARGIN: 0cm 0cm 0pt; mso-list: none; tab-stops: 35.4pt"><font size="2" face="Tahoma">«Окончание работы». Сценарий выключен.</font></div>
</li><li>
<div style="TEXT-INDENT: 0cm; MARGIN: 0cm 0cm 0pt; mso-list: none; tab-stops: 35.4pt"><font size="2" face="Tahoma">«Ошибка». Во время выполнения сценария произошла ошибка.</font></div>
</li><li>
<div style="TEXT-INDENT: 0cm; MARGIN: 0cm 0cm 0pt; mso-list: none; tab-stops: 35.4pt"><font size="2" face="Tahoma">«Переход показателя в зону».</font></div></li></ul><p style="MARGIN: 0cm 0cm 0pt 36pt; mso-list: none; tab-stops: 35.4pt" class="Bullet3"><o:p><font size="2" face="Tahoma"> </font></o:p></p>
<p style="TEXT-INDENT: 0cm; MARGIN: 0cm 0cm 0pt; mso-list: none; tab-stops: 35.4pt" class="Bullet3"><font size="2" face="Tahoma">Событие «Переход показателя в зону» содержит ряд настроек, которые позволяют точно указать, какие именно параметры события нас интересуют в данном случае.</font></p>
<p style="TEXT-INDENT: 0cm; MARGIN: 0cm 0cm 0pt; mso-list: none; tab-stops: 35.4pt" class="Bullet3"><o:p><font size="2" face="Tahoma"> </font></o:p></p>
<p style="TEXT-INDENT: 0cm; MARGIN: 0cm 0cm 0pt; mso-list: none; tab-stops: 35.4pt" class="Bullet3"><img src="_files/061 - ЦУП (переход показателя в зону).png"></img></p>
<p style="TEXT-INDENT: 0cm; MARGIN: 0cm 0cm 0pt; mso-list: none; tab-stops: 35.4pt" class="Bullet3"><o:p><font size="2" face="Tahoma"> </font></o:p></p>
<p style="TEXT-INDENT: 0cm; MARGIN: 0cm 0cm 0pt; mso-list: none; tab-stops: 35.4pt" class="Bullet3"><font size="2" face="Tahoma">При настройке данного события можно задать следующие параметры:</font></p>
<ul><li>
<div style="TEXT-INDENT: 0cm; MARGIN: 0cm 0cm 0pt; mso-list: none; tab-stops: 35.4pt" class="Bullet3"><font size="2" face="Tahoma">Интересующая зона показателя:</font></div>
<ul><li>
<div style="TEXT-INDENT: 0cm; MARGIN: 0cm 0cm 0pt; mso-list: none; tab-stops: 35.4pt" class="Bullet3"><font size="2" face="Tahoma">Зеленая</font></div>
</li><li>
<div style="TEXT-INDENT: 0cm; MARGIN: 0cm 0cm 0pt; mso-list: none; tab-stops: 35.4pt" class="Bullet3"><span style="FONT-FAMILY: 'Courier New'; mso-fareast-font-family: 'Courier New'"><span style="mso-list: Ignore"><span style="FONT: 7pt 'Times New Roman'"> </span></span></span><font size="2" face="Tahoma">Желтая</font></div>
</li><li>
<div style="TEXT-INDENT: 0cm; MARGIN: 0cm 0cm 0pt; mso-list: none; tab-stops: 35.4pt" class="Bullet3"><font size="2" face="Tahoma">Красная</font></div></li></ul></li><li>
<div style="TEXT-INDENT: 0cm; MARGIN: 0cm 0cm 0pt; mso-list: none; tab-stops: 35.4pt" class="Bullet3"><font size="2" face="Tahoma">Задержка по времени при переходе значения показателя в заданную зону. Установка этого параметра позволяет отсечь незначительные всплески значений показателя.</font></div>
</li><li>
<div style="TEXT-INDENT: 0cm; MARGIN: 0cm 0cm 0pt; mso-list: none; tab-stops: 35.4pt" class="Bullet3"><font size="2" face="Tahoma">Интервал повтора события при нахождении значения показателя в данной зоне. Если значение показателя находится в указанной зоне в течение длительного времени, то можно многократно генерировать (и, соответственно, обрабатывать) данное событие. Например, при длительном нахождении в красной зоне показателя производительности «Проблемы с параллельностью работы», можно многократно генерировать соответствующее событие и многократно на небольшое время включать запись аналитического показателя «Анализ ожиданий на блокировках»</font></div>
</li><li>
<div style="TEXT-INDENT: 0cm; MARGIN: 0cm 0cm 0pt; mso-list: none; tab-stops: 35.4pt" class="Bullet3"><font size="2" face="Tahoma">Список показателей. Имеется возможность отслеживать значения нескольких показателей одновременно. При этом можно указать, какое именно событие нас интересует:</font></div>
<ul><li>
<div style="TEXT-INDENT: 0cm; MARGIN: 0cm 0cm 0pt; mso-list: none; tab-stops: 35.4pt" class="Bullet3"><font size="2" face="Tahoma">переход всех показателей в указанную зону значений</font></div>
</li><li>
<div style="TEXT-INDENT: 0cm; MARGIN: 0cm 0cm 0pt; mso-list: none; tab-stops: 35.4pt" class="Bullet3"><font size="2" face="Tahoma">или переход одного (любого) показателя.</font></div></li></ul></li></ul><h3 style="MARGIN: 12pt 0cm 3pt"><a name="_Toc210828368"></a><a name="_Toc210828300"><span style="mso-bookmark: _Toc210828368"><font size="4" face="Arial">Команда</font></span></a></h3>
<p style="MARGIN: 0cm 0cm 0pt" class="MsoNormal"><font size="2" face="Tahoma">ЦУП позволяет использовать несколько предопределенных типов команд в качестве реакции на события. При наступлении одного события можно выполнить любое количество команд.</font></p>
<p style="MARGIN: 0cm 0cm 0pt" class="MsoNormal"><o:p><font size="2" face="Tahoma"> </font></o:p></p>
<p style="MARGIN: 0cm 0cm 0pt" class="MsoNormal"><font size="2" face="Tahoma">Для удобства команды в списке разбиты на несколько групп.</font></p>
<p style="MARGIN: 0cm 0cm 0pt" class="MsoNormal"><o:p><font size="2" face="Tahoma"> </font></o:p></p>
<p style="MARGIN: 0cm 0cm 0pt" class="MsoNormal"><img src="_files/062 - ЦУП (команды).png"></img></p>
<p style="MARGIN: 0cm 0cm 0pt" class="MsoNormal"><o:p><font size="2" face="Tahoma"> </font></o:p></p>
<p style="MARGIN: 0cm 0cm 0pt" class="MsoNormal"><font size="2" face="Tahoma">Многие команды имеют настройки, которые позволяют задавать параметры выполнения команды. Например, команда «Включить запись значений ПП» имеет следующую форму настроек:</font></p>
<p style="MARGIN: 0cm 0cm 0pt" class="MsoNormal"><o:p><font size="2" face="Tahoma"> </font></o:p></p>
<p style="MARGIN: 0cm 0cm 0pt" class="MsoNormal"><img src="_files/063 - ЦУП (включить запись взаимоблокировок).png"></img></p>
<p style="MARGIN: 0cm 0cm 0pt" class="MsoNormal"><o:p><font size="2" face="Tahoma"> </font></o:p></p>
<p style="MARGIN: 0cm 0cm 0pt" class="MsoNormal"><font size="2" face="Tahoma">Форма позволяет выбрать показатель производительности, который необходимо начать записывать и указать время, через которое запись будет автоматически выключена.</font></p></body></html>